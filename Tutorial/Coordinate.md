## Coordinate Sys

> 렌더 파이프 라인에서 Vertex Shader 단계의 마지막에, 지정된 좌표를 받아들이고 이 범위에서 벗어난 모든 좌표는 자르게됌
> 이때, Clip 된 좌표들은 모두 폐기되고, 남은 좌표들은 최종적으로 파편화되어 화면에 보이게 되는 것
> 이때, 눈에 보이는 모든 좌표들이 -1.0과 1.0 범위 안에 지정하는 것은 직관적이지 않기 때문에, 우리가 원하는 화면에 표현하기 위한 공간으로 다시 변환하게 되는 데 이때 사용되는 것이 **NDC(Noramlize Device Coordinate)**

<p align="center">
<img src="https://github.com/BOLTB0X/Metal-API/blob/main/img/3D.png?raw=true" alt="Example Image" width="80%">
</p>

<br/>

## Vertex 좌표계 (Clip Space -> NDC)

<p align="center">
<img src="https://github.com/BOLTB0X/Metal-API/blob/main/img/%EC%A0%95%EC%A0%90%EC%A2%8C%ED%91%9C.png?raw=true" alt="Example Image" width="80%">
</p>

1. **역할**

   - 화면 공간에서 객체의 위치를 정의
   - 화면 좌표는 -1.0 ~ 1.0의 범위로 정규화된 좌표를 사용하며, GPU가 화면의 픽셀 위치를 계산하는 기준이 됌
     <br/>

2. **범위**

   - x와 y 값은 화면 공간에서 각각 -1 ~ 1의 범위를 가짐
   - (-1, -1)은 화면의 왼쪽 아래
   - (1, 1)은 화면의 오른쪽 위
     <br/>

3. **사용 흐름**

   - 모델 좌표 -> 월드 좌표 -> 뷰 좌표 -> 클립 좌표 -> NDC로 변환
   - vertex 셰이더의 출력으로 NDC로 변환된 정점 데이터가 제공되는 것
     <br/>

```
(-1.0, 1.0) ------ (-0.5, 1.0) ------ (0.0, 1.0) ------ (0.5, 1.0) ------ (1.0, 1.0)
     |                 |                 |                 |                 |
     |                 |                 |                 |                 |
(-1.0, 0.5) ------ (-0.5, 0.5) ------ (0.0, 0.5) ------ (0.5, 0.5) ------ (1.0, 0.5)
     |                 |                 |                 |                 |
     |                 |                 |                 |                 |
(-1.0, 0.0) ------ (-0.5, 0.0) ------ (0.0, 0.0) ------ (0.5, 0.0) ------ (1.0, 0.0)
     |                 |                 |                 |                 |
     |                 |                 |                 |                 |
(-1.0, -0.5) ----- (-0.5, -0.5) ----- (0.0, -0.5) ----- (0.5, -0.5) ----- (1.0, -0.5)
     |                 |                 |                 |                 |
     |                 |                 |                 |                 |
(-1.0, -1.0) ----- (-0.5, -1.0) ----- (0.0, -1.0) ----- (0.5, -1.0) ----- (1.0, -1.0)

```

<br/>

## texture 좌표계 (UV Coordinates)

<p align="center">
<img src="https://github.com/BOLTB0X/Metal-API/blob/main/img/%ED%85%8D%EC%8A%A4%EC%B3%90%EC%A2%8C%ED%91%9C.png?raw=true" alt="Example Image" width="80%">
</p>

1. **역할**

   - 텍스처의 픽셀(텍셀)을 정규화된 형태로 참조
   - 정점과 매핑되어 텍스처 이미지를 정점에 입힐 때 사용
     <br/>

2. **범위**

   - 텍스처 좌표계는 (0, 0)에서 (1, 1) 범위를 사용
   - (0, 0)은 텍스처 이미지의 왼쪽 아래
   - (1, 1)은 텍스처 이미지의 오른쪽 위
     <br/>

3. **특징**
   - 텍스처 크기와 무관하게 상대적인 위치를 나타냄
   - GPU가 샘플링을 통해 텍스처 데이터를 가져올 때 사용
     <br/>

```
(0, 1) ---------------------------- (1, 1)
  |                                     |
  |                                     |
  |                                     |
  |                                     |
(0, 0) ---------------------------- (1, 0)

```

## 참고

- [블로그 참조 - lalyns(NDC(Clip Space)란 무엇인가?)](https://lalyns.tistory.com/entry/NDCClip-Space%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)

- [블로그 참조 - ally10(Metal 스터디 (4) - MSL)](https://ally10.tistory.com/56)
